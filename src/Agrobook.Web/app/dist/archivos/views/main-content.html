<div ng-controller="mainContentController as vm">
    <md-button class="md-fab md-fab-top-right"
               ng-click="vm.toggleSideNav()"
               ng-hide="vm.isSideNavOpen() || !vm.puedeCambiarProductores"
               aria-label="Seleccionar productor">
        <md-tooltip md-direction="left">Seleccionar otro productor</md-tooltip>
        <ng-md-icon icon="people"></ng-md-icon>
    </md-button>

    <div layout-gt-xs="row" layout="column">

        <div flex-gt-sm="50" flex>
            <div layout-padding flex-xs="70">
                <md-autocomplete md-search-text="vm.searchText"
                                 md-items="item in vm.productores | filter: vm.searchText"
                                 md-item-text="item.id"
                                 md-min-length="100"
                                 placeholder="Buscar">
                    <md-not-found>
                        Ninguno coincide con "{{vm.searchText}}".
                    </md-not-found>
                </md-autocomplete>
            </div>
            <md-content layout="column" style="overflow-y:scroll;height:calc(100vh - 135px);">
                <md-list flex><!--class="md-dense"-->
                    <md-list-item class="md-3-line"
                                  ng-click="vm.seleccionarArchivo(archivo)"
                                  ng-repeat="archivo in vm.archivos">
                        <img ng-src="./archivos/query/file-icon/{{vm.idProductor}}/{{archivo.nombre}}/{{archivo.extension}}" class="md-avatar" alt="pic" />
                        <div class="md-list-item-text" layout="column">
                            <p style="color: black;font-weight:100"
                               ng-class="{'archivo-seleccionado': vm.archivoSeleccionado === archivo}">
                                {{archivo.nombre}}
                            </p>
                            <h4 style="color:#7a7a7a;">{{archivo.fecha}}</h4>
                            <p>{{archivo.desc}}</p>
                        </div>
                        <md-button class="md-secondary md-icon-button"
                                   style="color: rgb(76, 175, 80);"
                                   aria-label="download"
                                   ng-click="vm.download(archivo)">
                            <ng-md-icon icon="file_download"></ng-md-icon>
                        </md-button>
                    </md-list-item>
                </md-list>
            </md-content>
        </div>

        <md-divider></md-divider>

        <div flex-gt-xs="50" hide-xs flex>
            <md-content class="md-padding">
                <div class="archivo-seleccione-por-favor" ng-hide="vm.archivoSeleccionado">
                    <p><ng-md-icon icon="remove_red_eye"></ng-md-icon></p>
                    <h3>Seleccione un archivo para ver más</h3>
                </div>
                <md-card md-theme="{{vm.archivoSeleccionado.extension == 'jpg' ? 'dark-grey' : 'default'}}" ng-show="vm.archivoSeleccionado">
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">{{vm.archivoSeleccionado.nombre}}</span>
                            <span class="md-subhead">{{vm.archivoSeleccionado.extension}}</span>
                            <span class="md-subhead">{{vm.archivoSeleccionado.fecha}}</span>
                            <span class="md-subhead">{{vm.archivoSeleccionado.desc}}</span>
                        </md-card-title-text>
                        <md-card-title-media>
                            <div class="md-media-lg card-media">
                                <img id="" ng-src="./archivos/query/file-icon/{{vm.idProductor}}/{{vm.archivoSeleccionado.nombre}}/{{vm.archivoSeleccionado.extension}}" />
                            </div>
                        </md-card-title-media>
                    </md-card-title>
                    <md-card-actions layout="row" layout-align="end center">
                        <md-button><ng-md-icon icon="file_download"></ng-md-icon>&nbsp;Descargar</md-button>
                        <!--<md-button>Action 2</md-button>-->
                    </md-card-actions>
                </md-card>
            </md-content>
        </div>

    </div>

    <div flex></div>
</div>